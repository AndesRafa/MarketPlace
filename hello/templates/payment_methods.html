<!DOCTYPE html>
<!--if IE 8html.no-js.lt-ie9(lang='en')
-->
<!-- [if gt IE 8] <!-->
<html class="no-js" lang="en">
<!-- <![endif]-->

<head>

    <meta charset="UTF-8">
    <title>Checkout - Ecofood html5 templates</title>
    <meta name="description" content="Ecofood theme tempalte">
    <meta name="author" content="AuCreative">
    <meta name="keywords" content="Ecofood theme template">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="../static/fonts/fonts.css" rel="stylesheet">
    <link href="../static/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="../static/vendor/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../static/vendor/css-hamburgers/dist/hamburgers.min.css" rel="stylesheet">
    <link href="../static/vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css" rel="stylesheet">
    <link href="../static/vendor/animate.css/animate.min.css" rel="stylesheet">
    <link href="../static/css/main.css" rel="stylesheet">
    <link href="../static/css/switcher.css" rel="stylesheet">
    <link href="../static/css/colors/green.css" rel="stylesheet" id="colors">
    <link href="../static/css/retina.css" rel="stylesheet">

    <link rel="shortcut icon" href="../static/images/icon/favicon.png">
    <link rel="apple-touch-icon" href="../static/images/icon/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../static/images/icon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../static/images/icon/apple-touch-icon-114x114.png">
    <script src="../static/js/modernizr-custom.js"></script>
</head>

<body>
{% load bootstrap3 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
<div class="page-loader">
    <div class="loader"></div>
</div>
<header>

    <div class="section dark-background">
        <div class="container">
            <div class="header-2">
                <div class="header-left">
                    <p>
                        <i class="fa fa-map-marker"></i>Cra. 1 # 18a-12, Bogotá / Colombia
                        <span>|</span>
                        <i class="fa fa-clock-o"></i> Entrega de pedidos 02:00 Pm - 04:00 Pm</p>
                </div>
            </div>
        </div>
    </div>

</header>
<nav>
    <!-- nav-2-->
    <div class="section white-background" id="js-navbar">
        <div class="container">
            <div class="nav-1 nav-2">
                <button class="hamburger has-animation hamburger--collapse" id="toggle-icon">
                        <span class="hamburger-box">
                            <span class="hamburger-inner"></span>
                        </span>
                </button>
                <div class="logo">
                    <a href="index.html">
                        <img src="../static/images/icons/ic-logo-01.png" alt="Ecofood"/>
                    </a>
                </div>
                <ul class="nav-menu">
                    <li class="has-drop">
                        <a onclick="location.href='{% url 'index' %}'" class="has-text-color-hover" >HOME</a>
                    </li>
                    <li class="has-drop">
                        <a onclick="location.href='{% url 'index' %}'" class="has-text-color-hover">CATALOGO</a>
                        <button class="btn-caret fa fa-angle-right"></button>
                    </li>
                    <li class="has-drop">
                        <a onclick="location.href='{% url 'paymentMethods' %}'" class="has-text-color-hover">METODOS DE PAGO</a>
                        <button class="btn-caret fa fa-angle-right"></button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>
<section>
    <div class="section primary-color-background">
        <div class="container">
            <div class="p-t-70 p-b-85">
                <!-- Heading page-->
                <div class="heading-page-1">
                    <h3>Métodos de Pago</h3>
                </div>
            </div>
        </div>
    </div>
    <div class="section border-bottom-grey">
        <div class="container">
            <div class="breadcrumb-1">
                <ul>
                    <li>
                        <a onclick="location.href='{% url 'index' %}'">Home</a>
                    </li>
                    <li>
                        <a onclick="location.href='{% url 'paymentMethods' %}'">Métodos de Pago</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>
{% if flag%}
<p class="h2" style="text-align: center;">Métodos de Pago</p>
<button type="button" style="margin-left: 3cm" class="btn btn-success btn-sm" onclick="enable()">Agregar Medio de Pago</button>
<div id="new_method" class="page-content p-t-40 p-b-90" style="display: none;">
<div class="checkout-payment-info" style="margin-left: 3cm;">
            <h4 class="checkout-heading">Nuevo Medio de Pago</h4>
            <div class="introduce">
                <p>Tarjetas de Credito Nueva

                    <img src="../static/images/icons/ic-payment-method-01.png" alt="payment"/>
                    <img src="../static/images/icons/ic-payment-method-02.png" alt="payment"/>
                    <img src="../static/images/icons/ic-payment-method-03.png" alt="payment"/>
                    <img src="../static/images/icons/ic-payment-method-04.png" alt="payment"/>
                    <img src="../static/images/icons/ic-payment-method-05.png" alt="payment"/>
                </p>

            </div>
            <div class="input-row m-b-15">
                <div class="input-col-3 p-r-5">
                    <input id="card_number" class="theme-input-text" type="text" placeholder="Numero de Tarjeta"/>
                </div>
                <div class="input-col-3 p-l-5 p-r-5">
                    <input id="exp_date" class="theme-input-text" type="text" placeholder="Expira (MM/YY) "/>
                </div>
                <div class="input-col-3 p-l-5">
                    <input id="code" class="theme-input-text" type="text" placeholder="Codigo"/>
                </div>
            </div>
    <br>
            <button type="button" class="btn btn-success btn-sm" onclick="newPaymentMethod()">Guardar</button>

</div>
</div>
<div id="method_list" class="page-content p-t-40 p-b-90">
        <div class="container">
            <!--wishlist-cart-1-->
            <div class="woocommerce shopping-cart-1">
                <form class="woocommerce-cart-form" action="#" method="post">
                    <table class="shop_table shop_table_responsive cart woocommerce-cart-form__contents shopping-cart-content table-bordered">
                        <thead>
                            <tr>
                                <th class="product-thumbnail">NÚMERO TARJETA</th>
                                <th class="product-name">NOMBRE DEL TITULAR</th>
                                <th class="product-price">AGREGADA</th>
                                <th class="product-remove"></th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for method in methods %}
                            <tr class="woocommerce-cart-form__cart-item cart_item shopping-cart-item">
                                <td class="product-name" data-title="Product">
                                    <a href="#">{{method.token}}</a>
                                </td>
                                <td class="product-name" data-title="Product">
                                    <a href="#">{{method.displayName}}</a>
                                </td>
                                <td class="product-price" data-title="Price">
                                    <span class="woocommerce-Price-amount amount">
                                        <span class="woocommerce-Price-currencySymbol"></span>{{method.createdDate|date:"Y/m/d"}}</span>
                                </td>
                                <td class="product-remove">
                                    <a class="remove fa fa-close" onclick="remove({{method.id}})"></a>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </form>
            </div>
            <!-- end wishlist-cart-1-->
        </div>
    </div>
{%else%}
<h4 class="checkout-heading" style="margin-left: 3cm;">No tienes medios de pago asociados!</h4><br>
<button type="button" style="margin-left: 3cm; margin-bottom: 2cm;" class="btn btn-success btn-sm" onclick="enable()">Agregar Medio de Pago</button>
<div id="new_method" class="page-content p-t-40 p-b-90" style="display: none;">
<div class="checkout-payment-info" style="margin-left: 3cm;">
            <h4 class="checkout-heading">Nuevo Medio de Pago</h4>
            <div class="introduce">
                <p>Tarjetas de Credito Nueva

                    <img src="../static/images/icons/ic-payment-method-01.png" alt="payment"/>
                    <img src="../static/images/icons/ic-payment-method-02.png" alt="payment"/>
                    <img src="../static/images/icons/ic-payment-method-03.png" alt="payment"/>
                    <img src="../static/images/icons/ic-payment-method-04.png" alt="payment"/>
                    <img src="../static/images/icons/ic-payment-method-05.png" alt="payment"/>
                </p>

            </div>
            <div class="input-row m-b-15">
                <div class="input-col-3 p-r-5">
                    <input id="card_number" class="theme-input-text" type="text" placeholder="Numero de Tarjeta"/>
                </div>
                <div class="input-col-3 p-l-5 p-r-5">
                    <input id="exp_date" class="theme-input-text" type="text" placeholder="Expira (MM/YY) "/>
                </div>
                <div class="input-col-3 p-l-5">
                    <input id="code" class="theme-input-text" type="text" placeholder="Codigo"/>
                </div>
            </div>
    <br>
            <button type="button" class="btn btn-success btn-sm" onclick="newPaymentMethod()">Guardar</button>

</div>
</div>

{% endif%}

<footer>
    <!--.footer-2-->
    <div class="footer-1 footer-2">
        <div class="container">
            <div class="row">
                <div class="col-md-4 col-sm-4">
                    <div class="footer-introduce">
                        <div class="footer-logo">
                            <img src="../static/images/icons/ic-logo-02.png" alt="logo ecofood"/>
                        </div>
                        <div class="footer-intro">
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-4">
                    <div class="footer-services">
                        <div class="footer-heading">
                            <h3>SERVICIOS AL CLIENTE</h3>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <ul>
                                    <li>
                                        <a href="#">Información Ordenes</a>
                                    </li>
                                    <li>
                                        <a href="#">Envíos & Devoluciones</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul>
                                    <li>
                                        <a href="#">Terminos & Condiciones</a>
                                    </li>
                                    <li>
                                        <a href="#">FAQs</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-4">
                    <div class="footer-contact">
                        <div class="footer-heading">
                            <h3>CONTACT US</h3>
                        </div>
                        <ul>
                            <li>
                                <i class="fa fa-map-marker"></i>
                                <span> Cra. 1 # 18a-12, Bogotá / Colombia</span>
                            </li>
                            <li>
                                <i class="fa fa-clock-o"></i>
                                <span>Entrega de pedidos 02:00 Pm - 04:00 Pm</span>
                            </li>
                            <li>
                                <i class="fa fa-phone"></i>
                                <span>(+571) 359 0173</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <ul class="footer-socials">
                    <li>
                        <a class="fa fa-facebook" href="#"></a>
                    </li>
                    <li>
                        <a class="fa fa-google-plus" href="#"></a>
                    </li>
                    <li>
                        <a class="fa fa-youtube" href="#"></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <button id="modalButton" style="display:none" type="button" class="btn btn-primary" data-toggle="modal"
            data-target="#exampleModalLong">
        Launch demo modal
    </button>

    <button id="modalPayment" style="display:none" type="button" class="btn btn-primary" data-toggle="modal"
            data-target="#payment">
        Launch demo modal
    </button>


    <div class="modal fade" id="payment" tabindex="-1" role="dialog" aria-labelledby="payment" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="paymentm">Operación Realizada</h5>
                </div>
                <div class="modal-body">
                    Metodo de pago agregado!
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" onclick="location.href='{% url 'paymentMethods' %}'">Gracias
                    </button>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- Modal  Error -->
<div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
     aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Ha Ocurrido un Error!</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Por favor, ingresa correctamente tu información de pago.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Entiendo</button>
            </div>
        </div>
    </div>
</div>
</footer>
<div id="up-to-top">
    <i class="fa fa-angle-up"></i>
</div>

<script src="../static/vendor/jquery/dist/jquery.min.js"></script>
<script src="../static/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="../static/vendor/retinajs/dist/retina.min.js"></script>
<script src="../static/vendor/SmoothScroll/SmoothScroll.js"></script>
<script src="../static/js/switcher-custom.js"></script>
<script src="../static/js/main.js"></script>
<script>
    function enable(){
        document.getElementById('new_method').style.display = 'block';
    }

    function newPaymentMethod(){

        cardNumber =$( "#card_number" ).val();
        expDate =$( "#exp_date" ).val();
        code =$( "#code" ).val();

        if(card_number != ""  && exp_date != ""  && code != ""){

            $.ajax({
            url: "{% url 'addPaymentMethod'%}",
            type: "POST",
            data: {
                "cardNumber": cardNumber, "expDate": expDate, "code": code
            },
            success: function (data) {
                console.log(data.message);
                $("#modalPayment").click();
            },
            error: function (xhr) {
                $("#modalButton").click();
            }
            });
        }
        else{
         console.log('error');
            $("#modalButton").click();
        }
    }

    function remove(id){
        alert(id);
    }
</script>
</body>

</html>